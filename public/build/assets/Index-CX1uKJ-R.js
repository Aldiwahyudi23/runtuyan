import{r as c,H as p,c as x,o as n,w as h,b,a,u as i,m as k,d,e as v,j as y,q as w,F as C,g as P,t as o,P as Y,f as F}from"./app-BugniqtJ.js";import V from"./PublicLayout-CNuK6Ldi.js";import{l as B}from"./lodash-lOqtGnns.js";const L={class:"max-w-4xl mx-auto py-8 px-4"},N={class:"bg-white rounded-lg shadow p-6"},A={class:"relative mb-8"},K={key:0,class:"absolute z-10 mt-2 w-full bg-white shadow-lg rounded-lg overflow-hidden"},S=["onClick"],U={class:"flex justify-between items-center"},j={class:"font-medium"},q={class:"text-sm text-gray-500"},D={key:0,class:"mt-6 p-4 bg-blue-50 rounded-lg"},E={class:"text-xl font-semibold mb-2"},I={class:"text-gray-600 mb-4"},Q={__name:"Index",setup(M){const u=c(""),r=c([]),s=c(null),m=B.debounce(()=>{if(u.value.length<2){r.value=[];return}p.get("/api/family-tree/search",{params:{query:u.value}}).then(l=>{r.value=l.data}).catch(l=>{console.error("Search error:",l),r.value=[]})},300),_=l=>{s.value=l,r.value=[]},g=(l,t)=>{if(!l)return null;const e=new Date(l).getFullYear();return(t?new Date(t).getFullYear():new Date().getFullYear())-e+" tahun"+(t?" (Alm)":"")};return(l,t)=>(n(),x(V,null,{default:h(()=>[b(i(k),{title:"Cari Keturunan"}),a("div",L,[t[3]||(t[3]=a("h1",{class:"text-3xl font-bold text-center mb-8"},"Cari Anggota Keluarga",-1)),a("div",N,[a("div",A,[y(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),onInput:t[1]||(t[1]=(...e)=>i(m)&&i(m)(...e)),type:"text",class:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan nama anggota keluarga..."},null,544),[[w,u.value]]),r.value.length>0?(n(),d("div",K,[a("ul",null,[(n(!0),d(C,null,P(r.value,e=>(n(),d("li",{key:e.id,class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100",onClick:f=>_(e)},[a("div",U,[a("span",j,o(e.name),1),a("span",q,o(e.gender==="male"?"Laki-laki":"Perempuan")+" • "+o(e.birth_date?g(e.birth_date,e.death_date):"Usia tidak diketahui"),1)])],8,S))),128))])])):v("",!0)]),s.value?(n(),d("div",D,[a("h2",E,o(s.value.name),1),a("p",I,o(s.value.gender==="male"?"Laki-laki":"Perempuan")+" • "+o(s.value.birth_date?g(s.value.birth_date,s.value.death_date):"Usia tidak diketahui"),1),b(i(Y),{href:l.route("public.family-tree.show",s.value.id),class:"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"},{default:h(()=>t[2]||(t[2]=[F(" Lihat Keturunan ")])),_:1},8,["href"])])):v("",!0)])])]),_:1}))}};export{Q as default};
