import{t as d,n as T,c as I,m as Y,a as U}from"./format-CkpID6nj.js";function g(n,e){const t=+d(n)-+d(e);return t<0?-1:t>0?1:t}function h(n,e,t){const[r,a]=T(t==null?void 0:t.in,n,e);return r.getFullYear()-a.getFullYear()}function p(n,e,t){const[r,a]=T(t==null?void 0:t.in,n,e),s=g(r,a),l=Math.abs(h(r,a));r.setFullYear(1584),a.setFullYear(1584);const c=g(r,a)===-s,u=s*(l-+c);return u===0?0:u}function N(n,e){const t=()=>I(e==null?void 0:e.in,NaN),a=z(n);let s;if(a.date){const i=y(a.date,2);s=M(i.restDateString,i.year)}if(!s||isNaN(+s))return t();const l=+s;let c=0,u;if(a.time&&(c=O(a.time),isNaN(c)))return t();if(a.timezone){if(u=Z(a.timezone),isNaN(u))return t()}else{const i=new Date(l+c),m=d(0,e==null?void 0:e.in);return m.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),m.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),m}return d(l+c+u,e==null?void 0:e.in)}const o={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},F=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,w=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,x=/^([+-])(\d{2})(?::?(\d{2}))?$/;function z(n){const e={},t=n.split(o.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],o.timeZoneDelimiter.test(e.date)&&(e.date=n.split(o.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const a=o.timezone.exec(r);a?(e.time=r.replace(a[1],""),e.timezone=a[1]):e.time=r}return e}function y(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?a:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function M(n,e){if(e===null)return new Date(NaN);const t=n.match(F);if(!t)return new Date(NaN);const r=!!t[4],a=f(t[1]),s=f(t[2])-1,l=f(t[3]),c=f(t[4]),u=f(t[5])-1;if(r)return W(e,c,u)?_(e,c,u):new Date(NaN);{const i=new Date(0);return!R(e,s,l)||!S(e,a)?new Date(NaN):(i.setUTCFullYear(e,s,Math.max(a,l)),i)}}function f(n){return n?parseInt(n):1}function O(n){const e=n.match(w);if(!e)return NaN;const t=D(e[1]),r=D(e[2]),a=D(e[3]);return $(t,r,a)?t*Y+r*U+a*1e3:NaN}function D(n){return n&&parseFloat(n.replace(",","."))||0}function Z(n){if(n==="Z")return 0;const e=n.match(x);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return v(r,a)?t*(r*Y+a*U):NaN}function _(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const a=r.getUTCDay()||7,s=(e-1)*7+t+1-a;return r.setUTCDate(r.getUTCDate()+s),r}const k=[31,null,31,30,31,30,31,31,30,31,30,31];function C(n){return n%400===0||n%4===0&&n%100!==0}function R(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(k[e]||(C(n)?29:28))}function S(n,e){return e>=1&&e<=(C(n)?366:365)}function W(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function $(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function v(n,e){return e>=0&&e<=59}function b(n,e=null){if(!n)return null;const t=e?N(e):new Date,r=N(n);return p(t,r)}export{b as c,p as d,N as p};
