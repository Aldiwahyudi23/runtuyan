import{i as k,C as V,d,o as n,a as s,h as S,b as o,u as r,j as c,q as v,w as p,f,n as P,F as b,g as _,t as w}from"./app-CI7z45tB.js";import{_ as h,a as u}from"./TextInput-CafRrjEZ.js";import{_ as m}from"./InputLabel-02-f10Lf.js";import{_ as U}from"./ActionMessage-B7sG3gRP.js";import{_ as q}from"./PrimaryButton-QPVVS8tF.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"container mx-auto px-4 py-8"},L={class:"bg-white p-6 rounded-lg shadow-md mb-8 transition-all duration-300 hover:shadow-lg"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},O={class:"flex items-center justify-end mt-6"},D={class:"bg-white p-6 rounded-lg shadow-md mb-8 transition-all duration-300 hover:shadow-lg mt-8"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},K=["value"],z=["value"],E={class:"flex items-center justify-end mt-6"},H={class:"bg-white p-6 rounded-lg shadow-md transition-all duration-300 hover:shadow-lg mt-8"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},W=["value"],G=["value"],Q={class:"flex items-center justify-end mt-6"},X={__name:"Index",props:{persons:Array,marriages:Array},setup(y){const x=y,I=k(()=>x.persons.filter(g=>g.gender==="male")),M=k(()=>x.persons.filter(g=>g.gender==="female")),l=V({name:"",gender:"",birth_date:"",death_date:"",bio:""}),t=V({person1_id:"",person2_id:"",marriage_date:""}),i=V({parent_id:"",child_id:""}),A=k(()=>M.value.filter(g=>!x.marriages.some(a=>a.relationships.some(T=>T.related_person_id===g.id&&T.type==="spouse"&&a.divorce_date===null)))),F=()=>{l.post(route("persons.store"),{preserveScroll:!0,onSuccess:()=>l.reset()})},$=()=>{t.post(route("marriages.store"),{preserveScroll:!0,onSuccess:()=>t.reset()})},j=()=>{i.post(route("relationships.store"),{preserveScroll:!0,onSuccess:()=>i.reset()})};return(g,e)=>(n(),d("div",C,[s("div",L,[e[12]||(e[12]=s("h2",{class:"text-xl font-bold mb-4"},"Tambah Individu Baru",-1)),s("form",{onSubmit:S(F,["prevent"])},[s("div",N,[s("div",null,[o(m,{for:"name",value:"Nama Lengkap *"}),o(h,{id:"name",modelValue:r(l).name,"onUpdate:modelValue":e[0]||(e[0]=a=>r(l).name=a),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(u,{class:"mt-2",message:r(l).errors.name},null,8,["message"])]),s("div",null,[o(m,{for:"gender",value:"Jenis Kelamin *"}),c(s("select",{id:"gender","onUpdate:modelValue":e[1]||(e[1]=a=>r(l).gender=a),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},e[9]||(e[9]=[s("option",{value:""},"Pilih Jenis Kelamin",-1),s("option",{value:"male"},"Laki-laki",-1),s("option",{value:"female"},"Perempuan",-1)]),512),[[v,r(l).gender]]),o(u,{class:"mt-2",message:r(l).errors.gender},null,8,["message"])]),s("div",null,[o(m,{for:"birth_date",value:"Tanggal Lahir"}),o(h,{id:"birth_date",modelValue:r(l).birth_date,"onUpdate:modelValue":e[2]||(e[2]=a=>r(l).birth_date=a),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),o(u,{class:"mt-2",message:r(l).errors.birth_date},null,8,["message"])]),s("div",null,[o(m,{for:"death_date",value:"Tanggal Meninggal"}),o(h,{id:"death_date",modelValue:r(l).death_date,"onUpdate:modelValue":e[3]||(e[3]=a=>r(l).death_date=a),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),o(u,{class:"mt-2",message:r(l).errors.death_date},null,8,["message"])])]),s("div",O,[o(U,{on:r(l).recentlySuccessful,class:"me-3 text-green-600"},{default:p(()=>e[10]||(e[10]=[f(" Tersimpan. ")])),_:1},8,["on"]),o(q,{class:P({"opacity-25":r(l).processing}),disabled:r(l).processing},{default:p(()=>e[11]||(e[11]=[f(" Simpan ")])),_:1},8,["class","disabled"])])],32)]),s("div",D,[e[17]||(e[17]=s("h2",{class:"text-xl font-bold mb-4"},"Catat Pernikahan",-1)),s("form",{onSubmit:S($,["prevent"])},[s("div",J,[s("div",null,[o(m,{for:"person1_id",value:"Suami *"}),c(s("select",{id:"person1_id","onUpdate:modelValue":e[4]||(e[4]=a=>r(t).person1_id=a),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[e[13]||(e[13]=s("option",{value:""},"Pilih Suami",-1)),(n(!0),d(b,null,_(I.value,a=>(n(),d("option",{value:a.id},w(a.name),9,K))),256))],512),[[v,r(t).person1_id]]),o(u,{class:"mt-2",message:r(t).errors.person1_id},null,8,["message"])]),s("div",null,[o(m,{for:"person2_id",value:"Istri *"}),c(s("select",{id:"person2_id","onUpdate:modelValue":e[5]||(e[5]=a=>r(t).person2_id=a),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[e[14]||(e[14]=s("option",{value:""},"Pilih Istri",-1)),(n(!0),d(b,null,_(A.value,a=>(n(),d("option",{value:a.id},w(a.name),9,z))),256))],512),[[v,r(t).person2_id]]),o(u,{class:"mt-2",message:r(t).errors.person2_id},null,8,["message"])]),s("div",null,[o(m,{for:"marriage_date",value:"Tanggal Pernikahan *"}),o(h,{id:"marriage_date",modelValue:r(t).marriage_date,"onUpdate:modelValue":e[6]||(e[6]=a=>r(t).marriage_date=a),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(u,{class:"mt-2",message:r(t).errors.marriage_date},null,8,["message"])])]),s("div",E,[o(U,{on:r(t).recentlySuccessful,class:"me-3 text-green-600"},{default:p(()=>e[15]||(e[15]=[f(" Tersimpan. ")])),_:1},8,["on"]),o(q,{class:P({"opacity-25":r(t).processing}),disabled:r(t).processing},{default:p(()=>e[16]||(e[16]=[f(" Simpan ")])),_:1},8,["class","disabled"])])],32)]),s("div",H,[e[22]||(e[22]=s("h2",{class:"text-xl font-bold mb-4"},"Hubungkan Orangtua dan Anak",-1)),s("form",{onSubmit:S(j,["prevent"])},[s("div",R,[s("div",null,[o(m,{for:"parent_id",value:"Orangtua *"}),c(s("select",{id:"parent_id","onUpdate:modelValue":e[7]||(e[7]=a=>r(i).parent_id=a),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[e[18]||(e[18]=s("option",{value:""},"Pilih Orangtua",-1)),(n(!0),d(b,null,_(y.persons,a=>(n(),d("option",{value:a.id},w(a.name),9,W))),256))],512),[[v,r(i).parent_id]]),o(u,{class:"mt-2",message:r(i).errors.parent_id},null,8,["message"])]),s("div",null,[o(m,{for:"child_id",value:"Anak *"}),c(s("select",{id:"child_id","onUpdate:modelValue":e[8]||(e[8]=a=>r(i).child_id=a),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[e[19]||(e[19]=s("option",{value:""},"Pilih Anak",-1)),(n(!0),d(b,null,_(y.persons,a=>(n(),d("option",{value:a.id},w(a.name),9,G))),256))],512),[[v,r(i).child_id]]),o(u,{class:"mt-2",message:r(i).errors.child_id},null,8,["message"])])]),s("div",Q,[o(U,{on:r(i).recentlySuccessful,class:"me-3 text-green-600"},{default:p(()=>e[20]||(e[20]=[f(" Tersimpan. ")])),_:1},8,["on"]),o(q,{class:P({"opacity-25":r(i).processing}),disabled:r(i).processing},{default:p(()=>e[21]||(e[21]=[f(" Simpan ")])),_:1},8,["class","disabled"])])],32)])]))}},oe=B(X,[["__scopeId","data-v-a2e9f22f"]]);export{oe as default};
