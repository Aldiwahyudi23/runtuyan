import{r as L,i as g,d as a,o,b as v,w as D,a as e,n as S,t as u,f as k,u as N,P as F,I as O,k as z,e as f,F as M,g as P,c as H,m as R}from"./app-ChGMDD_E.js";import V from"./PublicLayout-CMXsUUzD.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as A,d as q}from"./parseISO-Dod1uvw3.js";import"./normalizeDates-U9LyEZsq.js";const G={class:"member-info-container"},Y={class:"member-info-content"},E={class:"member-name"},J={class:"member-details"},Q={__name:"FamilyTreeNodeUmum",props:{person:Object,isMain:{type:Boolean,default:!1}},emits:["member-selected"],setup(l,{emit:c}){const i=l,m=c,n=L(!1),h=L(!1),y=()=>{n.value=!n.value,m("member-selected",{person:i.person,selected:n.value})},_=g(()=>i.person.name.split(" ").map(p=>p[0]).join("").toUpperCase()),x=g(()=>i.person.gender==="male"?"Laki-laki":"Perempuan"),T=g(()=>{if(!i.person.birth_date)return"-";const w=A(i.person.birth_date),p=i.person.death_date?A(i.person.death_date):new Date,$=q(p,w);return i.person.death_date?`${$} tahun (Alm)`:`${$} tahun`}),C=g(()=>({"bg-blue-100 text-blue-800":i.person.gender==="male","bg-pink-100 text-pink-800":i.person.gender==="female","border-2 border-yellow-400":i.isMain,"ring-2 ring-blue-500":n.value,"scale-110":h.value&&!n.value}));return(w,p)=>(o(),a("div",{class:S(["family-member",{"main-member":l.isMain,selected:n.value}]),onClick:y,onMouseenter:p[0]||(p[0]=$=>h.value=!0),onMouseleave:p[1]||(p[1]=$=>h.value=!1)},[v(N(F),{href:w.route("public.family-tree.show",l.person.id),class:"member-card"},{default:D(()=>[e("div",{class:S(["member-avatar",C.value])},u(_.value),3),e("div",G,[e("div",Y,[e("div",E,u(l.person.name),1),e("div",J,[k(u(x.value)+" ",1),p[2]||(p[2]=e("br",null,null,-1)),k(" "+u(T.value),1)])])])]),_:1},8,["href"])],34))}},b=B(Q,[["__scopeId","data-v-0f7de0c2"]]),X={class:"family-tree"},Z={key:0,class:"parents-grandparents-level"},ee={class:"parents-grandparents-wrapper"},se={class:"parents-grandparents-container"},ne={key:0,class:"father-line"},te={class:"father-parents"},re={class:"relationship-label"},le={class:"parent-node father-node"},oe={key:1,class:"mother-line"},ae={class:"mother-parents"},ie={class:"relationship-label"},de={class:"parent-node mother-node"},ue={class:"main-row"},ce={class:"main-person-highlight"},me={key:0,class:"spouses-level"},pe={class:"spouses-wrapper"},ve={class:"spouses-container"},he={class:"relationship-label"},fe={key:1,class:"children-level"},ge={class:"children-wrapper"},be={class:"children-container"},ke={class:"relationship-label"},ye={class:"child-with-spouse"},_e={key:0,class:"spouses-of-child"},xe={class:"relationship-label"},we={key:0,class:"grandchildren-level"},$e={class:"grandchildren-wrapper"},Me={class:"grandchildren-container"},Pe={class:"relationship-label"},Le={__name:"FamilyTreeUmum",props:{person:Object},setup(l){const c=l,i=L(null),m=L(null);O(()=>{z(()=>{setTimeout(()=>{if(m.value&&i.value){const t=i.value,s=m.value,r=t.offsetWidth,d=t.scrollWidth,I=s.offsetLeft,W=s.offsetWidth,j=I-r/2+W/2,K=d-r;t.scrollTo({left:Math.max(0,Math.min(j,K)),behavior:"smooth"})}},500)})});const n=g(()=>{var t;return(t=c.person.parents)==null?void 0:t.find(s=>s.gender==="male")}),h=g(()=>{var t;return(t=c.person.parents)==null?void 0:t.find(s=>s.gender==="female")}),y=g(()=>{var t;return((t=n.value)==null?void 0:t.parents)||[]}),_=g(()=>{var t;return((t=h.value)==null?void 0:t.parents)||[]}),x=g(()=>c.person.spouses?c.person.spouses.filter((t,s,r)=>s===r.findIndex(d=>d.id===t.id)):[]),T=g(()=>c.person.children?c.person.children.filter((t,s,r)=>s===r.findIndex(d=>d.id===t.id)):[]),C=t=>t.children?t.children.filter((s,r,d)=>r===d.findIndex(I=>I.id===s.id)):[],w=t=>t.spouses?t.spouses.filter(s=>{var r;return!((r=c.person.children)!=null&&r.some(d=>d.id===s.id))}):[],p=(t,s)=>t.gender==="male"?"Kakek":"Nenek",$=t=>c.person.gender==="male"?t.gender==="male"?"Pasangan":"Istri":t.gender==="female"?"Pasangan":"Suami",U=t=>t.gender==="male"?"Anak Laki-laki":"Anak Perempuan";return(t,s)=>(o(),a("div",X,[l.person?(o(),a("div",{key:0,class:"tree-container",ref_key:"treeContainer",ref:i},[l.person.parents&&l.person.parents.length>0?(o(),a("div",Z,[e("div",ee,[e("div",se,[n.value?(o(),a("div",ne,[e("div",te,[(o(!0),a(M,null,P(y.value,r=>(o(),a("div",{key:`father-parent-${r.id}`,class:"grandparent-node"},[e("div",re,u(p(r)),1),v(b,{person:r},null,8,["person"])]))),128))]),s[1]||(s[1]=e("div",{class:"vertical-connectors"},[e("div",{class:"connector-line vertical"}),e("div",{class:"connector-line vertical"})],-1)),e("div",le,[s[0]||(s[0]=e("div",{class:"relationship-label"}," Ayah ",-1)),v(b,{person:n.value},null,8,["person"])])])):f("",!0),h.value?(o(),a("div",oe,[e("div",ae,[(o(!0),a(M,null,P(_.value,r=>(o(),a("div",{key:`mother-parent-${r.id}`,class:"grandparent-node"},[e("div",ie,u(p(r)),1),v(b,{person:r},null,8,["person"])]))),128))]),s[3]||(s[3]=e("div",{class:"vertical-connectors"},[e("div",{class:"connector-line vertical"}),e("div",{class:"connector-line vertical"})],-1)),e("div",de,[s[2]||(s[2]=e("div",{class:"relationship-label"}," Ibu ",-1)),v(b,{person:h.value},null,8,["person"])])])):f("",!0)])]),s[4]||(s[4]=e("div",{class:"connector-line vertical long"},null,-1))])):f("",!0),e("div",ue,[e("div",{class:"main-person",ref_key:"mainPerson",ref:m},[s[5]||(s[5]=e("div",{class:"relationship-label main-label"}," ORANG UTAMA ",-1)),e("div",ce,[v(b,{person:l.person,isMain:!0},null,8,["person"])]),s[6]||(s[6]=e("div",{class:"pulse-animation"},null,-1))],512),l.person.spouses&&l.person.spouses.length>0?(o(),a("div",me,[e("div",pe,[e("div",ve,[(o(!0),a(M,null,P(x.value,r=>(o(),a("div",{key:r.id,class:"spouse-node"},[e("div",he,u($(r)),1),s[7]||(s[7]=e("div",{class:"connector-line horizontal"},null,-1)),v(b,{person:r},null,8,["person"])]))),128))])])])):f("",!0)]),l.person.children&&l.person.children.length>0?(o(),a("div",fe,[s[10]||(s[10]=e("div",{class:"connector-line vertical"},null,-1)),e("div",ge,[e("div",be,[(o(!0),a(M,null,P(T.value,r=>(o(),a("div",{key:r.id,class:"child-node"},[e("div",ke,u(U(r)),1),e("div",ye,[v(b,{person:r},null,8,["person"]),r.spouses&&r.spouses.length>0?(o(),a("div",_e,[(o(!0),a(M,null,P(w(r),d=>(o(),a("div",{key:`child-spouse-${d.id}`,class:"spouse-of-child-node"},[e("div",xe," Menantu "+u(d.gender==="male"?"Laki-laki":"Perempuan"),1),s[8]||(s[8]=e("div",{class:"connector-line horizontal"},null,-1)),v(b,{person:d},null,8,["person"])]))),128))])):f("",!0)]),r.children&&r.children.length>0?(o(),a("div",we,[s[9]||(s[9]=e("div",{class:"connector-line vertical"},null,-1)),e("div",$e,[e("div",Me,[(o(!0),a(M,null,P(C(r),d=>(o(),a("div",{key:d.id,class:"grandchild-node"},[e("div",Pe," Cucu "+u(d.gender==="male"?"Laki-laki":"Perempuan"),1),v(b,{person:d},null,8,["person"])]))),128))])])])):f("",!0)]))),128))])])])):f("",!0)],512)):f("",!0)]))}},Te=B(Le,[["__scopeId","data-v-3a143c29"]]),Ce={class:"max-w-7xl mx-auto py-4 px-4"},Ie={class:"flex justify-between items-center mb-4"},De={class:"bg-white rounded-lg shadow overflow-hidden"},Se={class:"p-6 border-b border-gray-200"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Ae={class:"space-y-2"},Fe={key:0},Be={key:0},Ue={class:"whitespace-pre-line"},We={class:"mt-4 prounded-lg shadow overflow-hidden bg-gray-50"},je={class:"overflow-x-auto"},Ke={class:"min-w-max p-4 bg-gray-200 rounded-lg border border-gray-200"},qe={__name:"Show",props:{person:Object},setup(l){const c=m=>{if(!m)return null;const n={year:"numeric",month:"long",day:"numeric"};return new Date(m).toLocaleDateString("id-ID",n)},i=(m,n)=>{if(!m)return null;const h=new Date(m),y=n?new Date(n):new Date;let _=y.getFullYear()-h.getFullYear();const x=y.getMonth()-h.getMonth();return(x<0||x===0&&y.getDate()<h.getDate())&&_--,_+" tahun"+(n?" (Alm)":"")};return(m,n)=>(o(),H(V,null,{default:D(()=>[v(N(R),{title:l.person.name+" - Keluarga"},null,8,["title"]),e("div",Ce,[e("div",Ie,[v(N(F),{href:m.route("public.family-tree.index"),class:"text-blue-600 hover:text-blue-800 flex items-center"},{default:D(()=>n[0]||(n[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),k(" Kembali ke Pencarian ")])),_:1},8,["href"])]),e("div",De,[e("div",Se,[e("div",Ne,[e("div",null,[n[7]||(n[7]=e("h2",{class:"text-xl font-semibold mb-4"},"Informasi Pribadi",-1)),e("div",Ae,[e("p",null,[n[1]||(n[1]=e("span",{class:"font-medium"},"Nama:",-1)),k(" "+u(l.person.name),1)]),e("p",null,[n[2]||(n[2]=e("span",{class:"font-medium"},"Jenis Kelamin:",-1)),k(" "+u(l.person.gender==="male"?"Laki-laki":"Perempuan"),1)]),e("p",null,[n[3]||(n[3]=e("span",{class:"font-medium"},"Tanggal Lahir:",-1)),k(" "+u(c(l.person.birth_date)||"-"),1)]),e("p",null,[n[4]||(n[4]=e("span",{class:"font-medium"},"Usia:",-1)),k(" "+u(i(l.person.birth_date,l.person.death_date)||"-"),1)]),l.person.death_date?(o(),a("p",Fe,[n[5]||(n[5]=e("span",{class:"font-medium"},"Tanggal Meninggal:",-1)),k(" "+u(c(l.person.death_date)),1)])):f("",!0),e("p",null,[n[6]||(n[6]=e("span",{class:"font-medium"},"Status:",-1)),e("span",{class:S(l.person.death_date?"text-red-600":"text-green-600")},u(l.person.death_date?" Meninggal":" Masih Hidup"),3)])])]),l.person.bio?(o(),a("div",Be,[n[8]||(n[8]=e("h2",{class:"text-xl font-semibold mb-4"},"Biografi",-1)),e("p",Ue,u(l.person.bio),1)])):f("",!0)])])]),e("div",We,[n[9]||(n[9]=e("h2",{class:"text-xl font-semibold mb-4"},"Keluarga",-1)),e("div",je,[e("div",Ke,[v(Te,{person:l.person},null,8,["person"])])])])])]),_:1}))}};export{qe as default};
