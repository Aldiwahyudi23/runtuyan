import{r as S,i as w,d as i,o as a,b as v,w as T,a as e,n as D,t as d,f as k,u as N,P as U,I as j,k as q,e as f,F as x,g as _,c as H,m as K}from"./app-CuZBNslr.js";import R from"./PublicLayout-DZk2hFnh.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as F,d as V}from"./parseISO-Dod1uvw3.js";import"./normalizeDates-U9LyEZsq.js";const Y={class:"member-info-container"},E={class:"member-info-content"},G={class:"member-name"},J={class:"member-details"},Q={__name:"FamilyTreeNodeUmum",props:{person:Object,isMain:{type:Boolean,default:!1}},emits:["member-selected"],setup(l,{emit:c}){const u=l,m=c,t=S(!1),h=S(!1),y=()=>{t.value=!t.value,m("member-selected",{person:u.person,selected:t.value})},$=w(()=>u.person.name.split(" ").map(p=>p[0]).join("").toUpperCase()),P=w(()=>u.person.gender==="male"?"Laki-laki":"Perempuan"),C=w(()=>{if(!u.person.birth_date)return"-";const M=F(u.person.birth_date),p=u.person.death_date?F(u.person.death_date):new Date,L=V(p,M);return u.person.death_date?`${L} tahun (Alm)`:`${L} tahun`}),I=w(()=>({"bg-blue-100 text-blue-800":u.person.gender==="male","bg-pink-100 text-pink-800":u.person.gender==="female","border-2 border-yellow-400":u.isMain,"ring-2 ring-blue-500":t.value,"scale-110":h.value&&!t.value}));return(M,p)=>(a(),i("div",{class:D(["family-member",{"main-member":l.isMain,selected:t.value}]),onClick:y,onMouseenter:p[0]||(p[0]=L=>h.value=!0),onMouseleave:p[1]||(p[1]=L=>h.value=!1)},[v(N(U),{href:M.route("public.family-tree.show",l.person.id),class:"member-card"},{default:T(()=>[e("div",{class:D(["member-avatar",I.value])},d($.value),3),e("div",Y,[e("div",E,[e("div",G,d(l.person.name),1),e("div",J,[k(d(P.value)+" ",1),p[2]||(p[2]=e("br",null,null,-1)),k(" "+d(C.value),1)])])])]),_:1},8,["href"])],34))}},b=B(Q,[["__scopeId","data-v-0f7de0c2"]]),X={class:"family-tree"},Z={key:0,class:"parents-level"},ee={class:"parents-wrapper"},se={class:"parents-container"},ne={class:"relationship-label"},te={key:0,class:"spouses-of-parent"},oe={class:"relationship-label"},re={class:"main-row"},le={class:"relationship-label main-label"},ae={key:0,class:"spouses-level"},ie={class:"spouses-wrapper"},de={class:"spouses-container"},ue={class:"relationship-label"},ce={key:1,class:"children-level"},me={class:"children-wrapper"},pe={class:"children-container"},ve={class:"relationship-label"},fe={class:"child-with-spouse"},he={key:0,class:"spouses-of-child"},ge={class:"relationship-label"},be={key:0,class:"grandchildren-level"},ke={class:"grandchildren-wrapper"},ye={class:"grandchildren-container"},xe={class:"relationship-label"},_e={key:0,class:"spouses-of-grandchild"},we={__name:"FamilyTreeUmum",props:{person:Object},setup(l){const c=l,u=S(null),m=S(null);j(()=>{q(()=>{setTimeout(()=>{if(m.value&&u.value){const o=u.value,n=m.value,s=o.offsetWidth,r=o.scrollWidth,g=n.offsetLeft,A=n.offsetWidth,O=g-s/2+A/2,W=r-s;o.scrollTo({left:Math.max(0,Math.min(O,W)),behavior:"smooth"})}},500)})});const t=w(()=>c.person.parents?c.person.parents.filter((o,n,s)=>n===s.findIndex(r=>r.id===o.id)):[]),h=w(()=>c.person.spouses?c.person.spouses.filter((o,n,s)=>n===s.findIndex(r=>r.id===o.id)):[]),y=w(()=>c.person.children?c.person.children.filter((o,n,s)=>n===s.findIndex(r=>r.id===o.id)):[]),$=o=>o.children?o.children.filter((n,s,r)=>s===r.findIndex(g=>g.id===n.id)):[],P=o=>o.spouses?o.spouses.filter(n=>{var s;return!((s=c.person.parents)!=null&&s.some(r=>r.id===n.id))}):[],C=o=>o.spouses?o.spouses.filter(n=>{var s;return!((s=c.person.children)!=null&&s.some(r=>r.id===n.id))}):[],I=(o,n)=>o.spouses?o.spouses.filter(s=>{var r;return!((r=n.children)!=null&&r.some(g=>g.id===s.id))}):[],M=o=>o.gender==="male"?"Ayah":"Ibu",p=(o,n)=>o.gender==="male"?n.gender==="male"?"Pasangan (Laki-laki)":"Istri":n.gender==="female"?"Pasangan (Perempuan)":"Suami",L=o=>c.person.gender==="male"?o.gender==="male"?"Pasangan":"Istri":o.gender==="female"?"Pasangan":"Suami",z=o=>o.gender==="male"?"Anak Laki-laki":"Anak Perempuan";return(o,n)=>(a(),i("div",X,[l.person?(a(),i("div",{key:0,class:"tree-container",ref_key:"treeContainer",ref:u},[l.person.parents&&l.person.parents.length>0?(a(),i("div",Z,[e("div",ee,[e("div",se,[(a(!0),i(x,null,_(t.value,s=>(a(),i("div",{key:s.id,class:"parent-node"},[e("div",ne,d(M(s)),1),v(b,{person:s},null,8,["person"]),s.spouses&&s.spouses.length>0?(a(),i("div",te,[(a(!0),i(x,null,_(P(s),r=>(a(),i("div",{key:`parent-spouse-${r.id}`,class:"spouse-of-parent-node"},[e("div",oe,d(p(s,r)),1),n[0]||(n[0]=e("div",{class:"connector-line horizontal"},null,-1)),v(b,{person:r},null,8,["person"])]))),128))])):f("",!0)]))),128))])]),n[1]||(n[1]=e("div",{class:"connector-line vertical"},null,-1))])):f("",!0),e("div",re,[e("div",{class:"main-person",ref_key:"mainPerson",ref:m},[e("div",le,d((l.person.gender==="male","Orang Utama")),1),v(b,{person:l.person,isMain:!0},null,8,["person"])],512),l.person.spouses&&l.person.spouses.length>0?(a(),i("div",ae,[e("div",ie,[e("div",de,[(a(!0),i(x,null,_(h.value,s=>(a(),i("div",{key:s.id,class:"spouse-node"},[e("div",ue,d(L(s)),1),n[2]||(n[2]=e("div",{class:"connector-line horizontal"},null,-1)),v(b,{person:s},null,8,["person"])]))),128))])])])):f("",!0)]),l.person.children&&l.person.children.length>0?(a(),i("div",ce,[n[7]||(n[7]=e("div",{class:"connector-line vertical"},null,-1)),e("div",me,[e("div",pe,[(a(!0),i(x,null,_(y.value,s=>(a(),i("div",{key:s.id,class:"child-node"},[e("div",ve,d(z(s)),1),e("div",fe,[v(b,{person:s},null,8,["person"]),s.spouses&&s.spouses.length>0?(a(),i("div",he,[(a(!0),i(x,null,_(C(s),r=>(a(),i("div",{key:`child-spouse-${r.id}`,class:"spouse-of-child-node"},[e("div",ge," Menantu "+d(r.gender==="male"?"Laki-laki":"Perempuan"),1),n[3]||(n[3]=e("div",{class:"connector-line horizontal"},null,-1)),v(b,{person:r},null,8,["person"])]))),128))])):f("",!0)]),s.children&&s.children.length>0?(a(),i("div",be,[n[6]||(n[6]=e("div",{class:"connector-line vertical"},null,-1)),e("div",ke,[e("div",ye,[(a(!0),i(x,null,_($(s),r=>(a(),i("div",{key:r.id,class:"grandchild-node"},[e("div",xe," Cucu "+d(r.gender==="male"?"Laki-laki":"Perempuan"),1),v(b,{person:r},null,8,["person"]),r.spouses&&r.spouses.length>0?(a(),i("div",_e,[(a(!0),i(x,null,_(I(r,s),g=>(a(),i("div",{key:`grandchild-spouse-${g.id}`,class:"spouse-of-grandchild-node"},[n[4]||(n[4]=e("div",{class:"relationship-label"}," Pasangan Cucu ",-1)),n[5]||(n[5]=e("div",{class:"connector-line horizontal"},null,-1)),v(b,{person:g},null,8,["person"])]))),128))])):f("",!0)]))),128))])])])):f("",!0)]))),128))])])])):f("",!0)],512)):f("",!0)]))}},$e=B(we,[["__scopeId","data-v-a1797cd3"]]),Pe={class:"max-w-7xl mx-auto py-4 px-4"},Me={class:"flex justify-between items-center mb-4"},Le={class:"bg-white rounded-lg shadow overflow-hidden"},Se={class:"p-6 border-b border-gray-200"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Ie={class:"space-y-2"},Te={key:0},De={key:0},Ne={class:"whitespace-pre-line"},Fe={class:"mt-4 prounded-lg shadow overflow-hidden bg-gray-50"},Ue={class:"overflow-x-auto"},Be={class:"min-w-max p-4 bg-gray-200 rounded-lg border border-gray-200"},qe={__name:"Show",props:{person:Object},setup(l){const c=m=>{if(!m)return null;const t={year:"numeric",month:"long",day:"numeric"};return new Date(m).toLocaleDateString("id-ID",t)},u=(m,t)=>{if(!m)return null;const h=new Date(m),y=t?new Date(t):new Date;let $=y.getFullYear()-h.getFullYear();const P=y.getMonth()-h.getMonth();return(P<0||P===0&&y.getDate()<h.getDate())&&$--,$+" tahun"+(t?" (Alm)":"")};return(m,t)=>(a(),H(R,null,{default:T(()=>[v(N(K),{title:l.person.name+" - Keluarga"},null,8,["title"]),e("div",Pe,[e("div",Me,[v(N(U),{href:m.route("public.family-tree.index"),class:"text-blue-600 hover:text-blue-800 flex items-center"},{default:T(()=>t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),k(" Kembali ke Pencarian ")])),_:1},8,["href"])]),e("div",Le,[e("div",Se,[e("div",Ce,[e("div",null,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold mb-4"},"Informasi Pribadi",-1)),e("div",Ie,[e("p",null,[t[1]||(t[1]=e("span",{class:"font-medium"},"Nama:",-1)),k(" "+d(l.person.name),1)]),e("p",null,[t[2]||(t[2]=e("span",{class:"font-medium"},"Jenis Kelamin:",-1)),k(" "+d(l.person.gender==="male"?"Laki-laki":"Perempuan"),1)]),e("p",null,[t[3]||(t[3]=e("span",{class:"font-medium"},"Tanggal Lahir:",-1)),k(" "+d(c(l.person.birth_date)||"-"),1)]),e("p",null,[t[4]||(t[4]=e("span",{class:"font-medium"},"Usia:",-1)),k(" "+d(u(l.person.birth_date,l.person.death_date)||"-"),1)]),l.person.death_date?(a(),i("p",Te,[t[5]||(t[5]=e("span",{class:"font-medium"},"Tanggal Meninggal:",-1)),k(" "+d(c(l.person.death_date)),1)])):f("",!0),e("p",null,[t[6]||(t[6]=e("span",{class:"font-medium"},"Status:",-1)),e("span",{class:D(l.person.death_date?"text-red-600":"text-green-600")},d(l.person.death_date?" Meninggal":" Masih Hidup"),3)])])]),l.person.bio?(a(),i("div",De,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold mb-4"},"Biografi",-1)),e("p",Ne,d(l.person.bio),1)])):f("",!0)])])]),e("div",Fe,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold mb-4"},"Keluarga",-1)),e("div",Ue,[e("div",Be,[v($e,{person:l.person},null,8,["person"])])])])])]),_:1}))}};export{qe as default};
