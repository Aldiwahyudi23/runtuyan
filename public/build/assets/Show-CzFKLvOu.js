import{r as N,i as x,d as i,o as a,b as p,w as S,a as e,n as C,t as d,f as b,u as D,P as F,e as f,F as y,g as _,c as B,m as z}from"./app-BugniqtJ.js";import A from"./PublicLayout-CNuK6Ldi.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as T,d as O}from"./parseISO-Dod1uvw3.js";import"./normalizeDates-U9LyEZsq.js";const j={class:"member-info-container"},q={class:"member-info-content"},H={class:"member-name"},K={class:"member-details"},R={__name:"FamilyTreeNodeUmum",props:{person:Object,isMain:{type:Boolean,default:!1}},emits:["member-selected"],setup(l,{emit:c}){const u=l,v=c,n=N(!1),g=N(!1),k=()=>{n.value=!n.value,v("member-selected",{person:u.person,selected:n.value})},w=x(()=>u.person.name.split(" ").map(m=>m[0]).join("").toUpperCase()),$=x(()=>u.person.gender==="male"?"Laki-laki":"Perempuan"),L=x(()=>{if(!u.person.birth_date)return"-";const P=T(u.person.birth_date),m=u.person.death_date?T(u.person.death_date):new Date,r=O(m,P);return u.person.death_date?`${r} tahun (Alm)`:`${r} tahun`}),I=x(()=>({"bg-blue-100 text-blue-800":u.person.gender==="male","bg-pink-100 text-pink-800":u.person.gender==="female","border-2 border-yellow-400":u.isMain,"ring-2 ring-blue-500":n.value,"scale-110":g.value&&!n.value}));return(P,m)=>(a(),i("div",{class:C(["family-member",{"main-member":l.isMain,selected:n.value}]),onClick:k,onMouseenter:m[0]||(m[0]=r=>g.value=!0),onMouseleave:m[1]||(m[1]=r=>g.value=!1)},[p(D(F),{href:P.route("public.family-tree.show",l.person.id),class:"member-card"},{default:S(()=>[e("div",{class:C(["member-avatar",I.value])},d(w.value),3),e("div",j,[e("div",q,[e("div",H,d(l.person.name),1),e("div",K,[b(d($.value)+" ",1),m[2]||(m[2]=e("br",null,null,-1)),b(" "+d(L.value),1)])])])]),_:1},8,["href"])],34))}},h=U(R,[["__scopeId","data-v-0f7de0c2"]]),V={class:"family-tree"},Y={key:0,class:"tree-container"},G={key:0,class:"parents-level"},E={class:"parents-wrapper"},J={class:"parents-container"},Q={class:"relationship-label"},W={key:0,class:"spouses-of-parent"},X={class:"relationship-label"},Z={class:"main-row"},ee={class:"main-person"},se={class:"relationship-label main-label"},ne={key:0,class:"spouses-level"},te={class:"spouses-wrapper"},re={class:"spouses-container"},le={class:"relationship-label"},oe={key:1,class:"children-level"},ae={class:"children-wrapper"},ie={class:"children-container"},de={class:"relationship-label"},ue={class:"child-with-spouse"},ce={key:0,class:"spouses-of-child"},me={class:"relationship-label"},pe={key:0,class:"grandchildren-level"},ve={class:"grandchildren-wrapper"},fe={class:"grandchildren-container"},ge={class:"relationship-label"},he={key:0,class:"spouses-of-grandchild"},be={__name:"FamilyTreeUmum",props:{person:Object},setup(l){const c=l,u=x(()=>c.person.parents?c.person.parents.filter((r,t,s)=>t===s.findIndex(o=>o.id===r.id)):[]),v=x(()=>c.person.spouses?c.person.spouses.filter((r,t,s)=>t===s.findIndex(o=>o.id===r.id)):[]),n=x(()=>c.person.children?c.person.children.filter((r,t,s)=>t===s.findIndex(o=>o.id===r.id)):[]),g=r=>r.children?r.children.filter((t,s,o)=>s===o.findIndex(M=>M.id===t.id)):[],k=r=>r.spouses?r.spouses.filter(t=>{var s;return!((s=c.person.parents)!=null&&s.some(o=>o.id===t.id))}):[],w=r=>r.spouses?r.spouses.filter(t=>{var s;return!((s=c.person.children)!=null&&s.some(o=>o.id===t.id))}):[],$=(r,t)=>r.spouses?r.spouses.filter(s=>{var o;return!((o=t.children)!=null&&o.some(M=>M.id===s.id))}):[],L=r=>r.gender==="male"?"Ayah":"Ibu",I=(r,t)=>r.gender==="male"?t.gender==="male"?"Pasangan (Laki-laki)":"Istri":t.gender==="female"?"Pasangan (Perempuan)":"Suami",P=r=>c.person.gender==="male"?r.gender==="male"?"Pasangan":"Istri":r.gender==="female"?"Pasangan":"Suami",m=r=>r.gender==="male"?"Anak Laki-laki":"Anak Perempuan";return(r,t)=>(a(),i("div",V,[l.person?(a(),i("div",Y,[l.person.parents&&l.person.parents.length>0?(a(),i("div",G,[e("div",E,[e("div",J,[(a(!0),i(y,null,_(u.value,s=>(a(),i("div",{key:s.id,class:"parent-node"},[e("div",Q,d(L(s)),1),p(h,{person:s},null,8,["person"]),s.spouses&&s.spouses.length>0?(a(),i("div",W,[(a(!0),i(y,null,_(k(s),o=>(a(),i("div",{key:`parent-spouse-${o.id}`,class:"spouse-of-parent-node"},[e("div",X,d(I(s,o)),1),t[0]||(t[0]=e("div",{class:"connector-line horizontal"},null,-1)),p(h,{person:o},null,8,["person"])]))),128))])):f("",!0)]))),128))])]),t[1]||(t[1]=e("div",{class:"connector-line vertical"},null,-1))])):f("",!0),e("div",Z,[e("div",ee,[e("div",se,d((l.person.gender==="male","Orang Utama")),1),p(h,{person:l.person,isMain:!0},null,8,["person"])]),l.person.spouses&&l.person.spouses.length>0?(a(),i("div",ne,[e("div",te,[e("div",re,[(a(!0),i(y,null,_(v.value,s=>(a(),i("div",{key:s.id,class:"spouse-node"},[e("div",le,d(P(s)),1),t[2]||(t[2]=e("div",{class:"connector-line horizontal"},null,-1)),p(h,{person:s},null,8,["person"])]))),128))])])])):f("",!0)]),l.person.children&&l.person.children.length>0?(a(),i("div",oe,[t[7]||(t[7]=e("div",{class:"connector-line vertical"},null,-1)),e("div",ae,[e("div",ie,[(a(!0),i(y,null,_(n.value,s=>(a(),i("div",{key:s.id,class:"child-node"},[e("div",de,d(m(s)),1),e("div",ue,[p(h,{person:s},null,8,["person"]),s.spouses&&s.spouses.length>0?(a(),i("div",ce,[(a(!0),i(y,null,_(w(s),o=>(a(),i("div",{key:`child-spouse-${o.id}`,class:"spouse-of-child-node"},[e("div",me," Menantu "+d(o.gender==="male"?"Laki-laki":"Perempuan"),1),t[3]||(t[3]=e("div",{class:"connector-line horizontal"},null,-1)),p(h,{person:o},null,8,["person"])]))),128))])):f("",!0)]),s.children&&s.children.length>0?(a(),i("div",pe,[t[6]||(t[6]=e("div",{class:"connector-line vertical"},null,-1)),e("div",ve,[e("div",fe,[(a(!0),i(y,null,_(g(s),o=>(a(),i("div",{key:o.id,class:"grandchild-node"},[e("div",ge," Cucu "+d(o.gender==="male"?"Laki-laki":"Perempuan"),1),p(h,{person:o},null,8,["person"]),o.spouses&&o.spouses.length>0?(a(),i("div",he,[(a(!0),i(y,null,_($(o,s),M=>(a(),i("div",{key:`grandchild-spouse-${M.id}`,class:"spouse-of-grandchild-node"},[t[4]||(t[4]=e("div",{class:"relationship-label"}," Pasangan Cucu ",-1)),t[5]||(t[5]=e("div",{class:"connector-line horizontal"},null,-1)),p(h,{person:M},null,8,["person"])]))),128))])):f("",!0)]))),128))])])])):f("",!0)]))),128))])])])):f("",!0)])):f("",!0)]))}},ke=U(be,[["__scopeId","data-v-f551d90b"]]),ye={class:"max-w-7xl mx-auto py-4 px-4"},_e={class:"flex justify-between items-center mb-4"},xe={class:"bg-white rounded-lg shadow overflow-hidden"},we={class:"p-6 border-b border-gray-200"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Pe={class:"space-y-2"},Me={key:0},Le={key:0},Ie={class:"whitespace-pre-line"},Se={class:"mt-4 prounded-lg shadow overflow-hidden bg-gray-50"},Ce={class:"overflow-x-auto"},De={class:"min-w-max p-4 bg-gray-200 rounded-lg border border-gray-200"},ze={__name:"Show",props:{person:Object},setup(l){const c=v=>{if(!v)return null;const n={year:"numeric",month:"long",day:"numeric"};return new Date(v).toLocaleDateString("id-ID",n)},u=(v,n)=>{if(!v)return null;const g=new Date(v),k=n?new Date(n):new Date;let w=k.getFullYear()-g.getFullYear();const $=k.getMonth()-g.getMonth();return($<0||$===0&&k.getDate()<g.getDate())&&w--,w+" tahun"+(n?" (Alm)":"")};return(v,n)=>(a(),B(A,null,{default:S(()=>[p(D(z),{title:l.person.name+" - Keluarga"},null,8,["title"]),e("div",ye,[e("div",_e,[p(D(F),{href:v.route("public.family-tree.index"),class:"text-blue-600 hover:text-blue-800 flex items-center"},{default:S(()=>n[0]||(n[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),b(" Kembali ke Pencarian ")])),_:1},8,["href"])]),e("div",xe,[e("div",we,[e("div",$e,[e("div",null,[n[7]||(n[7]=e("h2",{class:"text-xl font-semibold mb-4"},"Informasi Pribadi",-1)),e("div",Pe,[e("p",null,[n[1]||(n[1]=e("span",{class:"font-medium"},"Nama:",-1)),b(" "+d(l.person.name),1)]),e("p",null,[n[2]||(n[2]=e("span",{class:"font-medium"},"Jenis Kelamin:",-1)),b(" "+d(l.person.gender==="male"?"Laki-laki":"Perempuan"),1)]),e("p",null,[n[3]||(n[3]=e("span",{class:"font-medium"},"Tanggal Lahir:",-1)),b(" "+d(c(l.person.birth_date)||"-"),1)]),e("p",null,[n[4]||(n[4]=e("span",{class:"font-medium"},"Usia:",-1)),b(" "+d(u(l.person.birth_date,l.person.death_date)||"-"),1)]),l.person.death_date?(a(),i("p",Me,[n[5]||(n[5]=e("span",{class:"font-medium"},"Tanggal Meninggal:",-1)),b(" "+d(c(l.person.death_date)),1)])):f("",!0),e("p",null,[n[6]||(n[6]=e("span",{class:"font-medium"},"Status:",-1)),e("span",{class:C(l.person.death_date?"text-red-600":"text-green-600")},d(l.person.death_date?" Meninggal":" Masih Hidup"),3)])])]),l.person.bio?(a(),i("div",Le,[n[8]||(n[8]=e("h2",{class:"text-xl font-semibold mb-4"},"Biografi",-1)),e("p",Ie,d(l.person.bio),1)])):f("",!0)])])]),e("div",Se,[n[9]||(n[9]=e("h2",{class:"text-xl font-semibold mb-4"},"Keluarga",-1)),e("div",Ce,[e("div",De,[p(ke,{person:l.person},null,8,["person"])])])])])]),_:1}))}};export{ze as default};
